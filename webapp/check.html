<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Maternal Health Risk Check</title>
    <link rel="stylesheet" href="/assets/css/styles.css" />
</head>

<body>
    <header class="nav">
        <div class="container nav-inner">
            <a class="brand" href="/"><img src="/assets/img/logo.svg" alt="Maternal Health AI" class="brand-logo" /><span>Maternal Health</span></a>
            <nav class="nav-links">
                <a href="/resources.html">Resources</a>
                <a href="/articles.html">Articles</a>
                <a href="/blog.html">Blog</a>
                <a href="/medication.html">Medication</a>
                <a class="nav-cta" href="/check.html">Start Check</a>
            </nav>
        </div>
    </header>

    <main class="section">
        <div class="container">
            <h2>Maternal Health Risk Check</h2>
            <p class="sub">
                Enter your health metrics to get a risk assessment. This is a screening tool — not a diagnosis.
            </p>

            <div class="grid-3">
                <!-- LEFT: Form -->
                <section class="card" style="grid-column: span 2;">
                    <div
                        style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
                        <span class="pill">Health Metrics</span>
                        <span class="pill">Private • No sign-up</span>
                    </div>

                    <form id="riskForm" style="margin-top:14px">
                        <h3 style="margin: 10px 0 8px;">Enter your health data</h3>

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:12px;">
                            <label>
                                <div class="pill">Age (years)</div>
                                <input class="input" type="number" min="10" max="60" value="25" id="Age" name="Age"
                                    required />
                            </label>
                            <label>
                                <div class="pill">Systolic BP (mmHg)</div>
                                <input class="input" type="number" min="70" max="200" value="120" id="SystolicBP"
                                    name="SystolicBP" required />
                            </label>
                            <label>
                                <div class="pill">Diastolic BP (mmHg)</div>
                                <input class="input" type="number" min="40" max="140" value="80" id="DiastolicBP"
                                    name="DiastolicBP" required />
                            </label>
                            <label>
                                <div class="pill">Blood Sugar (mmol/L)</div>
                                <input class="input" type="number" min="3" max="30" step="0.1" value="7.0" id="BS"
                                    name="BS" required />
                            </label>
                            <label>
                                <div class="pill">Body Temperature (°F)</div>
                                <input class="input" type="number" min="95" max="105" step="0.1" value="98.6"
                                    id="BodyTemp" name="BodyTemp" required />
                            </label>
                            <label>
                                <div class="pill">Heart Rate (bpm)</div>
                                <input class="input" type="number" min="40" max="200" value="76" id="HeartRate"
                                    name="HeartRate" required />
                            </label>
                        </div>

                        <div class="hero-actions" style="margin-top:16px;">
                            <button type="submit" class="btn btn-primary" id="predictBtn">Get Risk Assessment →</button>
                            <a class="btn" href="/resources.html">Need resources?</a>
                        </div>

                        <div class="small" style="margin-top:10px;">If you feel unsafe or in danger, go to the Resources
                            page for emergency options.</div>
                    </form>
                </section>

                <!-- RIGHT: Results -->
                <aside class="card">
                    <span class="pill">Your Risk Assessment</span>
                    <h3 style="margin: 10px 0 6px;" id="resultTitle">Complete the check</h3>
                    <p id="resultText" style="color: var(--muted); margin: 0 0 12px;">
                        Enter your health metrics and click "Get Risk Assessment" to see results.
                    </p>

                    <div id="resultBox" class="metric" style="display:none;">
                        <div class="val" id="riskLevel">—</div>
                        <div class="lbl" id="riskNote">Maternal Risk Level</div>
                    </div>

                    <div style="margin-top:14px;">
                        <div class="pill">Next steps</div>
                        <ul style="margin: 10px 0 0; padding-left: 18px; color: var(--muted);">
                            <li id="stepA">—</li>
                            <li id="stepB">—</li>
                            <li id="stepC">—</li>
                        </ul>
                    </div>

                    <div style="margin-top:16px;">
                        <a class="btn" href="/articles.html">Read helpful articles →</a>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footbar">
                <span>© 2026 Maternal Health. All rights reserved.</span>
                <span>Not medical advice.</span>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('riskForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const data = {
                Age: parseFloat(document.getElementById('Age').value),
                SystolicBP: parseFloat(document.getElementById('SystolicBP').value),
                DiastolicBP: parseFloat(document.getElementById('DiastolicBP').value),
                BS: parseFloat(document.getElementById('BS').value),
                BodyTemp: parseFloat(document.getElementById('BodyTemp').value),
                HeartRate: parseFloat(document.getElementById('HeartRate').value)
            };

            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    const err = await response.json();
                    throw new Error(err.detail || 'Prediction failed');
                }

                const result = await response.json();
                showResult(result.risk_level);
            } catch (error) {
                alert('Error: ' + error.message);
            }
        });

        function showResult(level) {
            document.getElementById('resultTitle').textContent = 'Your Result';
            document.getElementById('resultBox').style.display = 'block';
            document.getElementById('riskLevel').textContent = level;

            const stepA = document.getElementById('stepA');
            const stepB = document.getElementById('stepB');
            const stepC = document.getElementById('stepC');
            const resultText = document.getElementById('resultText');

            if (level === 'Low') {
                resultText.textContent = 'Your metrics indicate low risk. Continue regular checkups.';
                stepA.textContent = 'Maintain a healthy diet and regular exercise.';
                stepB.textContent = 'Continue regular prenatal checkups.';
                stepC.textContent = 'Monitor for any changes in symptoms.';
            } else if (level === 'Mid') {
                resultText.textContent = 'Your metrics indicate moderate risk. Consult with your healthcare provider.';
                stepA.textContent = 'Schedule a follow-up appointment with your doctor.';
                stepB.textContent = 'Monitor blood pressure and blood sugar regularly.';
                stepC.textContent = 'Discuss lifestyle changes with your healthcare provider.';
            } else {
                resultText.textContent = 'Your metrics indicate high risk. Please seek medical attention promptly.';
                stepA.textContent = 'Contact your healthcare provider immediately.';
                stepB.textContent = 'Closely monitor all vital signs.';
                stepC.textContent = 'Follow medical advice and treatment plans strictly.';
            }
        }
    </script>
</body>

</html>