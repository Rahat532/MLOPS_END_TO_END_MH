<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Maternal Health Risk Check</title>
    <link rel="stylesheet" href="/assets/css/styles.css" />
</head>

<body>
    <header class="nav">
        <div class="container nav-inner">
            <a class="brand" href="/"><img src="/assets/img/logo.svg" alt="Maternal Health AI"
                    class="brand-logo" /><span>Maternal Health</span></a>
            <button class="nav-toggle" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav class="nav-links">
                <a href="/resources.html">Resources</a>
                <a href="/articles.html">Articles</a>
                <a href="/blog.html">Blog</a>
                <a href="/medication.html">Medication</a>
                <a class="nav-cta" href="/check.html">Start Check</a>
            </nav>
        </div>
    </header>

    <main class="section">
        <div class="container">
            <h2>Maternal Health Risk Check</h2>
            <p class="sub">
                Enter your health metrics to get a risk assessment. This is a screening tool — not a diagnosis.
            </p>

            <div class="grid-3">
                <!-- LEFT: Form -->
                <section class="card" style="grid-column: span 2;">
                    <div
                        style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
                        <span class="pill">Health Metrics</span>
                        <span class="pill">Private • No sign-up</span>
                    </div>

                    <form id="riskForm" style="margin-top:14px">
                        <h3 style="margin: 10px 0 8px;">Enter your health data</h3>

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:12px;">
                            <label>
                                <div class="pill">Age (years)</div>
                                <input class="input" type="number" min="10" max="60" placeholder="e.g. 25" id="Age"
                                    name="Age" required />
                            </label>
                            <label>
                                <div class="pill">Systolic BP (mmHg)</div>
                                <input class="input" type="number" min="70" max="200" placeholder="e.g. 120"
                                    id="SystolicBP" name="SystolicBP" required />
                            </label>
                            <label>
                                <div class="pill">Diastolic BP (mmHg)</div>
                                <input class="input" type="number" min="40" max="140" placeholder="e.g. 80"
                                    id="DiastolicBP" name="DiastolicBP" required />
                            </label>
                            <label>
                                <div class="pill">Blood Sugar (mmol/L)</div>
                                <input class="input" type="number" min="3" max="30" step="0.1" placeholder="e.g. 7.0"
                                    id="BS" name="BS" required />
                            </label>
                            <label>
                                <div class="pill">Body Temperature (°F)</div>
                                <input class="input" type="number" min="95" max="105" step="0.1" placeholder="e.g. 98.6"
                                    id="BodyTemp" name="BodyTemp" required />
                            </label>
                            <label>
                                <div class="pill">Heart Rate (bpm)</div>
                                <input class="input" type="number" min="40" max="200" placeholder="e.g. 76"
                                    id="HeartRate" name="HeartRate" required />
                            </label>
                        </div>

                        <div class="hero-actions" style="margin-top:16px;">
                            <button type="submit" class="btn btn-primary" id="predictBtn">Get Risk Assessment →</button>
                            <a class="btn" href="/resources.html">Need resources?</a>
                        </div>

                        <div class="small" style="margin-top:10px;">If you feel unsafe or in danger, go to the Resources
                            page for emergency options.</div>
                    </form>
                </section>

                <!-- RIGHT: Results -->
                <aside class="card" id="resultSection">
                    <span class="pill">Your Risk Assessment</span>
                    <h3 style="margin: 10px 0 6px;" id="resultTitle">Complete the check</h3>

                    <!-- Loading/Status Message -->
                    <div id="statusMessage" style="display:none; margin: 12px 0;">
                        <div id="loadingIndicator" style="display:flex; align-items:center; gap:10px;">
                            <div class="spinner"></div>
                            <span id="statusText">Predicting… please wait</span>
                        </div>
                        <div id="countdownTimer"
                            style="font-size:28px; font-weight:700; color:var(--primary); margin-top:8px;">3</div>
                    </div>

                    <!-- Ready Message -->
                    <div id="readyMessage" style="display:none; color:var(--success); font-weight:600; margin:12px 0;">
                        ✓ Your result is ready below.
                    </div>

                    <p id="resultText" style="color: var(--muted); margin: 0 0 12px;">
                        Enter your health metrics and click "Get Risk Assessment" to see results.
                    </p>

                    <div id="resultBox" class="metric" style="display:none;">
                        <div class="val" id="riskLevel">—</div>
                        <div class="lbl" id="riskNote">Maternal Risk Level</div>
                    </div>

                    <div style="margin-top:14px;">
                        <div class="pill">Next steps</div>
                        <ul style="margin: 10px 0 0; padding-left: 18px; color: var(--muted);">
                            <li id="stepA">—</li>
                            <li id="stepB">—</li>
                            <li id="stepC">—</li>
                        </ul>
                    </div>

                    <div style="margin-top:16px;">
                        <a class="btn" href="/articles.html">Read helpful articles →</a>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <!-- Brand Column -->
                <div>
                    <div class="footer-brand">
                        <img src="/assets/img/logo.svg" alt="Maternal Health AI" />
                        <span>Maternal Health</span>
                    </div>
                    <p class="footer-desc">AI-powered maternal health risk assessment — designed to support healthier
                        pregnancies through technology and education.</p>
                    <div class="footer-social">
                        <a href="#" aria-label="Twitter">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg>
                        </a>
                        <a href="#" aria-label="Facebook">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                            </svg>
                        </a>
                        <a href="#" aria-label="LinkedIn">
                            <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/check.html">Risk Assessment</a></li>
                        <li><a href="/resources.html">Resources</a></li>
                        <li><a href="/articles.html">Articles</a></li>
                        <li><a href="/blog.html">Blog</a></li>
                    </ul>
                </div>

                <!-- Health Info -->
                <div class="footer-col">
                    <h4>Health Info</h4>
                    <ul>
                        <li><a href="/medication.html">Medication Safety</a></li>
                        <li><a href="/resources.html#guidelines">Health Guidelines</a></li>
                        <li><a href="/resources.html#emergency">Emergency Info</a></li>
                        <li><a href="/articles.html">Learn More</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div class="footer-col">
                    <h4>Contact</h4>
                    <ul>
                        <li><a href="/contact.html">Get in Touch</a></li>
                        <li><a href="mailto:support@maternalhealth.ai">Email Us</a></li>
                        <li><a href="/resources.html">Support</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>

            <div class="footbar">
                <span>© 2026 Maternal Health AI. All rights reserved.</span>
                <div class="footbar-links">
                    <a href="#">Privacy Policy</a>
                    <a href="#">Terms of Service</a>
                    <a href="#">Disclaimer</a>
                </div>
                <span>Not medical advice. Consult your healthcare provider.</span>
            </div>
        </div>
    </footer>

    <script>
        const form = document.getElementById('riskForm');
        const predictBtn = document.getElementById('predictBtn');
        const statusMessage = document.getElementById('statusMessage');
        const statusText = document.getElementById('statusText');
        const countdownTimer = document.getElementById('countdownTimer');
        const readyMessage = document.getElementById('readyMessage');
        const resultSection = document.getElementById('resultSection');
        const resultBox = document.getElementById('resultBox');
        const resultTitle = document.getElementById('resultTitle');
        const resultText = document.getElementById('resultText');

        // Default input values for reset
        const defaultValues = {
            Age: '',
            SystolicBP: '',
            DiastolicBP: '',
            BS: '',
            BodyTemp: '',
            HeartRate: ''
        };

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            // Collect form data
            const data = {
                Age: parseFloat(document.getElementById('Age').value),
                SystolicBP: parseFloat(document.getElementById('SystolicBP').value),
                DiastolicBP: parseFloat(document.getElementById('DiastolicBP').value),
                BS: parseFloat(document.getElementById('BS').value),
                BodyTemp: parseFloat(document.getElementById('BodyTemp').value),
                HeartRate: parseFloat(document.getElementById('HeartRate').value)
            };

            // Disable button and show loading state
            predictBtn.disabled = true;
            predictBtn.textContent = 'Predicting…';
            predictBtn.style.opacity = '0.7';

            // Hide previous results and ready message
            resultBox.style.display = 'none';
            readyMessage.style.display = 'none';
            resultTitle.textContent = 'Analyzing…';
            resultText.textContent = 'Please wait while we process your health data.';

            // Show loading indicator with countdown
            statusMessage.style.display = 'block';
            statusText.textContent = 'Predicting… please wait';

            let countdown = 3;
            countdownTimer.textContent = countdown;

            // Start countdown
            const countdownInterval = setInterval(() => {
                countdown--;
                if (countdown > 0) {
                    countdownTimer.textContent = countdown;
                } else {
                    countdownTimer.textContent = '…';
                }
            }, 1000);

            try {
                // Make API request
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                // Wait for at least 3 seconds for the countdown
                await new Promise(resolve => setTimeout(resolve, 3000));

                clearInterval(countdownInterval);

                if (!response.ok) {
                    const err = await response.json();
                    throw new Error(err.detail || 'Prediction failed');
                }

                const result = await response.json();

                // Hide loading, show ready message
                statusMessage.style.display = 'none';
                readyMessage.style.display = 'block';

                // Show result after brief delay
                setTimeout(() => {
                    showResult(result.risk_level);

                    // Smooth scroll to result section
                    resultSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // Clear form inputs after successful prediction
                    clearForm();

                    // Re-enable button
                    resetButton();
                }, 500);

            } catch (error) {
                clearInterval(countdownInterval);
                statusMessage.style.display = 'none';

                // Show error state
                resultTitle.textContent = 'Error';
                resultText.textContent = 'Prediction failed, please try again.';
                resultText.style.color = '#ef4444';

                // Re-enable button
                resetButton();

                // Reset error styling after 3 seconds
                setTimeout(() => {
                    resultText.style.color = 'var(--muted)';
                }, 3000);
            }
        });

        function showResult(level) {
            resultTitle.textContent = 'Your Result';
            resultBox.style.display = 'block';
            document.getElementById('riskLevel').textContent = level;

            const stepA = document.getElementById('stepA');
            const stepB = document.getElementById('stepB');
            const stepC = document.getElementById('stepC');

            // Color code the result
            const riskLevel = document.getElementById('riskLevel');
            if (level === 'Low') {
                riskLevel.style.color = '#22c55e';
                resultText.textContent = 'Your metrics indicate low risk. Continue regular checkups.';
                stepA.textContent = 'Maintain a healthy diet and regular exercise.';
                stepB.textContent = 'Continue regular prenatal checkups.';
                stepC.textContent = 'Monitor for any changes in symptoms.';
            } else if (level === 'Mid') {
                riskLevel.style.color = '#f59e0b';
                resultText.textContent = 'Your metrics indicate moderate risk. Consult with your healthcare provider.';
                stepA.textContent = 'Schedule a follow-up appointment with your doctor.';
                stepB.textContent = 'Monitor blood pressure and blood sugar regularly.';
                stepC.textContent = 'Discuss lifestyle changes with your healthcare provider.';
            } else {
                riskLevel.style.color = '#ef4444';
                resultText.textContent = 'Your metrics indicate high risk. Please seek medical attention promptly.';
                stepA.textContent = 'Contact your healthcare provider immediately.';
                stepB.textContent = 'Closely monitor all vital signs.';
                stepC.textContent = 'Follow medical advice and treatment plans strictly.';
            }
        }

        function clearForm() {
            document.getElementById('Age').value = '';
            document.getElementById('SystolicBP').value = '';
            document.getElementById('DiastolicBP').value = '';
            document.getElementById('BS').value = '';
            document.getElementById('BodyTemp').value = '';
            document.getElementById('HeartRate').value = '';
        }

        function resetButton() {
            predictBtn.disabled = false;
            predictBtn.textContent = 'Get Risk Assessment →';
            predictBtn.style.opacity = '1';
        }
    </script>
    <script src="/assets/js/main.js"></script>
</body>

</html>